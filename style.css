:root{
  --bg:#0b0f17; --card:#111827; --text:#e5e7eb; --muted:#9ca3af;
  --gold1:#fbbf24; --gold2:#fde68a;
}
body{
  margin:0; font-family: system-ui, -apple-system, "Segoe UI", sans-serif;
  background: radial-gradient(1200px 600px at 50% 10%, #1f2937, var(--bg));
  color:var(--text);
  min-height:100vh; display:grid; place-items:center;
}
.wrap{
  width:min(720px, 92vw);
  background: rgba(17,24,39,0.85);
  border:1px solid rgba(255,255,255,0.08);
  border-radius: 20px;
  padding: 18px 18px 22px;
  box-shadow: 0 18px 60px rgba(0,0,0,0.45);
  position: relative;
  overflow:hidden;
}
h1{ margin: 0 0 10px; font-size: 18px; color:var(--muted); font-weight:600;}
.row{
  display:flex; gap:12px; flex-wrap:wrap; align-items:center;
  margin-bottom: 14px;
}
label{ color:var(--muted); font-size: 14px; }
input{
  width: 110px;
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  color:var(--text);
  padding: 10px 12px;
  border-radius: 12px;
  outline:none;
  font-size: 16px;
}
button{
  background: rgba(255,255,255,0.10);
  border: 1px solid rgba(255,255,255,0.16);
  color:var(--text);
  padding: 11px 14px;
  border-radius: 14px;
  font-size: 16px;
  cursor:pointer;
  transition: transform .05s ease, background .2s ease;
  user-select:none;
}
button:active{ transform: translateY(1px) scale(0.99); }
button:hover{ background: rgba(255,255,255,0.14); }

.out{
  height: 190px;
  display:grid;
  place-items:center;
  border-radius: 18px;
  background: rgba(0,0,0,0.18);
  border: 1px solid rgba(255,255,255,0.08);
  position: relative;
}
#face{
  font-weight: 900;
  font-size: 96px;
  letter-spacing: 0.02em;
  text-align:center;
  padding: 0 16px;
  line-height: 1.0;
  transition: transform .12s ease;
  text-shadow: 0 12px 40px rgba(0,0,0,0.45);
  word-break: break-word;
}
#info{
  margin-top: 10px;
  color: var(--muted);
  font-size: 14px;
  min-height: 20px;
}

/* 大吉演出 */
.lucky #face{
  background: linear-gradient(90deg, var(--gold1), var(--gold2), var(--gold1));
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 0 22px rgba(251,191,36,0.22), 0 12px 50px rgba(0,0,0,0.55);
  filter: drop-shadow(0 0 10px rgba(251,191,36,0.15));
}
.lucky .out{
  border-color: rgba(251,191,36,0.30);
  box-shadow: 0 0 0 1px rgba(251,191,36,0.15) inset, 0 18px 70px rgba(251,191,36,0.08);
}

/* サイコロ揺れ */
.shake{ animation: shake .22s linear 1; }
@keyframes shake{
  0%{ transform: translate(0,0) rotate(0deg); }
  20%{ transform: translate(-4px, 2px) rotate(-1deg); }
  40%{ transform: translate(4px, -2px) rotate(1deg); }
  60%{ transform: translate(-3px, -1px) rotate(-1deg); }
  80%{ transform: translate(3px, 2px) rotate(1deg); }
  100%{ transform: translate(0,0) rotate(0deg); }
}

/* 爆発フラッシュ & 画面揺れ */
.boom{ animation: boomshake .45s ease-in-out 1; }
@keyframes boomshake{
  0%{ transform: translate(0,0) scale(1); }
  12%{ transform: translate(-10px, 6px) scale(1.01); }
  24%{ transform: translate(12px, -8px) scale(1.02); }
  36%{ transform: translate(-9px, -6px) scale(1.02); }
  48%{ transform: translate(10px, 7px) scale(1.01); }
  60%{ transform: translate(-6px, 3px) scale(1.00); }
  100%{ transform: translate(0,0) scale(1); }
}
.flash{
  position:absolute; inset:0;
  background: radial-gradient(400px 220px at 50% 45%, rgba(255,255,255,0.95), rgba(255,255,255,0.0));
  opacity:0;
  pointer-events:none;
}
.flash.on{ animation: flash .35s ease-out 1; }
@keyframes flash{
  0%{ opacity:0; }
  10%{ opacity:1; }
  100%{ opacity:0; }
}

/* 粒 */
.particle{
  position:absolute;
  width:8px; height:8px;
  border-radius: 2px;
  background: rgba(255,255,255,0.9);
  opacity: 0.9;
  pointer-events:none;
  transform: translate(-50%, -50%);
  animation: fly .7s ease-out forwards;
  filter: drop-shadow(0 6px 10px rgba(0,0,0,0.35));
}
@keyframes fly{
  0%{ transform: translate(var(--x0), var(--y0)) rotate(0deg); opacity:1; }
  100%{ transform: translate(var(--x1), var(--y1)) rotate(220deg); opacity:0; }
}

.hint{
  margin-top: 10px;
  font-size: 12px;
  color: rgba(156,163,175,0.85);
}
code{ color:#d1d5db; }
